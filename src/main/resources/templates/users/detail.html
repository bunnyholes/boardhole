<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>user detail - boardhole</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <style>
        @view-transition {
            navigation: auto;
        }
    </style>
    <!--/*/ <th:block th:replace="~{fragments/head :: head('user detail - boardhole')}"/> /*/-->
</head>
<body class="bg-slate-50 text-slate-900">
    <!--/*/ <th:block th:replace="~{layouts/shell :: shell('user detail - boardhole', ~{::main})}"/> /*/-->
    <main class="flex-1">
                <section class="mx-auto max-w-4xl px-6 py-10">
                    <!-- 페이지 타이틀 -->
                    <div class="mb-8">
                        <h1 class="text-3xl font-semibold text-slate-900">내 정보 관리</h1>
                        <p class="mt-2 text-base text-slate-500">프로필 정보를 확인하고 수정할 수 있습니다. 수정 후 저장 버튼을 클릭하세요.</p>
                    </div>

                    <form id="profileForm" method="post" th:action="@{/users/me}" novalidate class="space-y-6">
                        <input type="hidden" name="_method" value="PUT"/>
                        <input type="hidden" name="_method" value="put"/>

                        <div>
                            <label for="username" class="block text-sm font-semibold text-slate-700 mb-2">사용자명</label>
                            <input id="username"
                                   name="username"
                                   th:value="${user.username}"
                                   value="hello-hong"
                                   type="text"
                                   disabled
                                   class="w-full rounded-2xl border border-slate-200 bg-slate-100 px-4 py-3 text-base text-slate-500 cursor-not-allowed">
                            <small class="mt-2 block text-sm text-slate-500">사용자명은 변경할 수 없습니다.</small>
                        </div>

                        <div>
                            <label for="email" class="block text-sm font-semibold text-slate-700 mb-2">이메일</label>
                            <input id="email"
                                   name="email"
                                   th:value="${user.email}"
                                   value="hong@gil.dong"
                                   type="email"
                                   disabled
                                   class="w-full rounded-2xl border border-slate-200 bg-slate-100 px-4 py-3 text-base text-slate-500 cursor-not-allowed">
                            <small class="mt-2 block text-sm text-slate-500">이메일은 변경할 수 없습니다.</small>
                        </div>

                        <div>
                            <label for="name" class="block text-sm font-semibold text-slate-700 mb-2">이름</label>
                            <input id="name"
                                   maxlength="100"
                                   name="name"
                                   placeholder="이름을 입력하세요"
                                   th:value="${updateRequest != null ? updateRequest.name() : user.name}"
                                   value="홍길동"
                                   type="text"
                                   th:classappend="${updateRequest != null and #fields.hasErrors('updateRequest.name')} ? 'border-red-500 focus:border-red-500 focus:ring-red-500/20' : ''"
                                   class="w-full rounded-2xl border border-slate-200 bg-white px-4 py-3 text-base text-slate-900 placeholder:text-slate-400 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition">
                            <div th:if="${updateRequest != null and #fields.hasErrors('updateRequest.name')}" class="mt-2">
                                <p th:each="err : ${#fields.errors('updateRequest.name')}"
                                   th:text="${err}"
                                   class="text-sm text-red-600">
                                    에러 메시지
                                </p>
                            </div>
                        </div>

                        <div>
                            <label for="roles" class="block text-sm font-semibold text-slate-700 mb-2">역할</label>
                            <input id="roles"
                                   type="text"
                                   th:value="${#strings.listJoin(user.roles, ', ')}"
                                   value="USER"
                                   disabled
                                   class="w-full rounded-2xl border border-slate-200 bg-slate-100 px-4 py-3 text-base text-slate-500 cursor-not-allowed">
                        </div>

                        <div class="grid gap-4 md:grid-cols-2">
                            <div>
                                <label class="block text-sm font-semibold text-slate-700 mb-2">가입일</label>
                                <div class="rounded-2xl border border-slate-200 bg-slate-100 px-4 py-3">
                                    <span class="text-base text-slate-500"
                                          th:text="${user.createdAt != null ? #temporals.format(user.createdAt, 'yyyy-MM-dd') : '알 수 없음'}">2025-10-22</span>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-slate-700 mb-2">최근 로그인</label>
                                <div class="rounded-2xl border border-slate-200 bg-slate-100 px-4 py-3">
                                    <span class="text-base text-slate-500"
                                          th:text="${user.lastLogin != null ? #temporals.format(user.lastLogin, 'yyyy-MM-dd HH:mm') : '기록 없음'}">2025-10-22 10:55</span>
                                </div>
                            </div>
                        </div>

                        <div class="flex items-center justify-end gap-3 pt-4">
                            <a th:href="@{/}" href="../index.html"
                               class="inline-flex items-center justify-center rounded-full border border-slate-200 px-5 py-2.5 text-sm font-semibold text-slate-600 transition hover:border-slate-300 hover:bg-slate-50">
                                취소
                            </a>
                            <button type="submit"
                                    class="rounded-full bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-900/70 focus-visible:ring-offset-2">
                                수정 완료
                            </button>
                        </div>
                    </form>
                </section>
            </main>
</body>
</html>
