<!DOCTYPE html>
<html lang="ko" th:replace="~{fragments/base :: layout(title='프로필 수정', content=~{::main}, contextMenu=~{})}"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <title>프로필 수정</title>
</head>

<main>
    <article class="contrast">
        <header>
            <hgroup>
                <h1>✏️ 프로필 수정</h1>
                <p>사용자 기본 정보를 확인하고 이름을 수정할 수 있습니다.</p>
            </hgroup>
        </header>

        <section class="grid">
            <div>
                <h2>현재 정보</h2>
                <dl th:object="${user}">
                    <dt>사용자명</dt>
                    <dd th:text="*{username}">testuser</dd>
                    <dt>이메일</dt>
                    <dd th:text="*{email}">email@example.com</dd>
                </dl>
            </div>

            <div>
                <h2>이름 수정</h2>
                <form id="userForm" method="post" th:action="@{/users/me/edit}" th:object="${user}" novalidate>
                    <input type="hidden" name="_method" value="PATCH">
                    <label for="name">
                        이름
                        <input aria-required="true"
                               id="name"
                               maxlength="100"
                               placeholder="이름을 입력하세요"
                               th:attr="aria-invalid=${#fields.hasErrors('name')} ? 'true' : (${#fields.hasAnyErrors()} ? 'false' : null),aria-describedby=${#fields.hasErrors('name')} ? 'name-help' : null"
                               th:field="*{name}"
                               type="text">
                        <small id="name-help" th:if="${#fields.hasErrors('name')}" th:errors="*{name}">이름 오류 메시지</small>
                    </label>

                    <footer>
                        <button class="secondary" type="reset">초기화</button>
                        <button class="primary" type="submit">수정 완료</button>
                    </footer>
                </form>
            </div>
        </section>
    </article>
</main>
</html>
