<!DOCTYPE html>
<html lang="ko"
      th:replace="~{fragments/base :: layout(title=(${board.title}), content=~{::section}, contextMenu=~{::contextMenu})}"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:text="${board.title + ' - boardholes'}">게시글 제목 - boardholes</title>
</head>
<body>
<!-- 컨텍스트 메뉴 Fragment (헤더에 주입될 부분) -->
<th:block th:fragment="contextMenu">
    <li sec:authorize="hasPermission(#vars.board.id, 'BOARD', 'WRITE')">
        <button id="context-menu-anchor" popovertarget="context-menu-popover"
                class="secondary outline"
                aria-label="메뉴" title="메뉴">
            ⚙️
        </button>
    </li>
</th:block>

<section class="board-detail-page">
    <!-- 네비게이션 breadcrumb -->
    <nav aria-label="breadcrumb">
        <ul>
            <li><a href="/boards">게시판</a></li>
            <li>게시글 상세</li>
        </ul>
    </nav>

    <!-- 메인 카드 (article = 자동 카드 스타일) -->
    <article>
        <!-- 헤더 영역 -->
        <header>
            <hgroup>
                <h1 th:text="${board.title}">게시글 제목</h1>
                <p>
                    <small>
                        <span th:text="${board.authorName}">홍길동</span> |
                        <span th:text="${#temporals.format(board.createdAt, 'MM-dd HH:mm')}">01-15 14:30</span>
                        <span th:if="${board.updatedAt != board.createdAt}">
                            | 수정: <span
                                th:text="${#temporals.format(board.updatedAt, 'MM-dd HH:mm')}">01-15 15:30</span>
                        </span>
                        | 조회 <span th:text="${board.viewCount}">123</span>
                    </small>
                </p>
            </hgroup>
        </header>

        <!-- 본문 내용 -->
        <p th:utext="${#strings.replace(board.content, '\n', '<br />')}">
            게시글 내용이 여기에 표시됩니다.
        </p>
    </article>

    <!-- 컨텍스트 메뉴 Popover -->
    <aside sec:authorize="hasPermission(#vars.board.id, 'BOARD', 'WRITE')"
           class="pico-background-zinc-500" id="context-menu-popover" popover="auto">
        <nav>
            <ul>
                <li>
                    <a th:href="@{/boards/{id}/edit(id=${board.id})}" role="button">
                        ✏️ 수정
                    </a>
                </li>
                <li>
                    <form method="post"
                          th:action="@{/boards/{id}(id=${board.id})}">
                        <input type="hidden" name="_method" value="delete"/>
                        <input class="contrast" type="submit" value="🗑️ 삭제"/>
                    </form>
                </li>
            </ul>
        </nav>
    </aside>

</section>
</body>
</html>
